jQuery(function(a){window.wc_ea_meta_boxes_product_variations_media={variable_image_frame:null,setting_variation_image_id:null,setting_variation_image:null,wp_media_post_id:wp.media.model.settings.post.id,init:function(){a(".wc_ea_term_controls").on("click",".upload_image_button",this.add_image)},add_image:function(e){var _=a(this),i=_.attr("rel"),t=_.closest(".upload_image");if(wc_ea_meta_boxes_product_variations_media.setting_variation_image=t,wc_ea_meta_boxes_product_variations_media.setting_variation_image_id=i,e.preventDefault(),_.is(".remove"))a(".upload_image_id",wc_ea_meta_boxes_product_variations_media.setting_variation_image).val("").change(),wc_ea_meta_boxes_product_variations_media.setting_variation_image.find("img").eq(0).attr("src",wc_ea_admin_settings.woocommerce_placeholder_img_src),wc_ea_meta_boxes_product_variations_media.setting_variation_image.find(".upload_image_button").removeClass("remove");else{if(wc_ea_meta_boxes_product_variations_media.variable_image_frame)return wc_ea_meta_boxes_product_variations_media.variable_image_frame.uploader.uploader.param("post_id",wc_ea_meta_boxes_product_variations_media.setting_variation_image_id),void wc_ea_meta_boxes_product_variations_media.variable_image_frame.open();wp.media.model.settings.post.id=wc_ea_meta_boxes_product_variations_media.setting_variation_image_id,wc_ea_meta_boxes_product_variations_media.variable_image_frame=wp.media.frames.variable_image=wp.media({title:wc_ea_admin_settings.i18n_choose_image,button:{text:wc_ea_admin_settings.i18n_set_image},states:[new wp.media.controller.Library({title:wc_ea_admin_settings.i18n_choose_image,filterable:"all"})]}),wc_ea_meta_boxes_product_variations_media.variable_image_frame.on("select",function(){var e=wc_ea_meta_boxes_product_variations_media.variable_image_frame.state().get("selection").first().toJSON(),_=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;a(".upload_image_id",wc_ea_meta_boxes_product_variations_media.setting_variation_image).val(e.id).change(),wc_ea_meta_boxes_product_variations_media.setting_variation_image.find(".upload_image_button").addClass("remove"),wc_ea_meta_boxes_product_variations_media.setting_variation_image.find("img").eq(0).attr("src",_),wp.media.model.settings.post.id=wc_ea_meta_boxes_product_variations_media.wp_media_post_id}),wc_ea_meta_boxes_product_variations_media.variable_image_frame.open()}}},window.wc_ea_meta_boxes_product_variations_media.init()});